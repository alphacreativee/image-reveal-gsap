document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger);let r=new Lenis;r.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{r.raf(1e3*e)}),gsap.ticker.lagSmoothing(0),document.querySelectorAll(".img:not([data-origin])").forEach((e,r)=>{e.setAttribute("data-origin",r%2==0?"left":"right")}),gsap.set(".img",{scale:0,force3D:!0}),document.querySelectorAll(".work-row").forEach((e,r)=>{let o=e.querySelectorAll(".img");0<o.length&&(e.id="work-row-"+r,ScrollTrigger.create({id:"scaleIn-"+r,trigger:e,start:"top bottom",end:"bottom bottom-=10%",scrub:1,invalidateOnRefresh:!0,onUpdate:function(e){if(e.isActive){var e=e.progress,t=Math.min(1,1.2*e);let r=gsap.utils.interpolate(0,1,t);o.forEach(e=>{gsap.set(e,{scale:r,force3D:!0})}),.95<e&&gsap.set(o,{scale:1,force3D:!0})}},onLeave:function(){gsap.set(o,{scale:1,force3D:!0})}}),ScrollTrigger.create({id:"scaleOut-"+r,trigger:e,start:"top top",end:"bottom top",pin:!0,pinSpacing:!1,scrub:1,invalidateOnRefresh:!0,onEnter:function(){gsap.set(o,{scale:1,force3D:!0})},onUpdate:function(t){if(t.isActive){let r=gsap.utils.interpolate(1,0,t.progress);o.forEach(e=>{gsap.set(e,{scale:r,force3D:!0,clearProps:1===t.progress?"scale":""})})}else t.scroll()<t.start&&gsap.set(o,{scale:1,force3D:!0})}}),ScrollTrigger.create({id:"marker-"+r,trigger:e,start:"bottom bottom",end:"top top",onEnter:()=>{var e=ScrollTrigger.getById("scaleOut-"+r);e&&0===e.progress&&gsap.set(o,{scale:1,force3D:!0})},onLeave:()=>{var e=ScrollTrigger.getById("scaleOut-"+r);e&&0===e.progress&&gsap.set(o,{scale:1,force3D:!0})},onEnterBack:()=>{var e=ScrollTrigger.getById("scaleOut-"+r);e&&0===e.progress&&gsap.set(o,{scale:1,force3D:!0})}}))}),window.addEventListener("resize",()=>{ScrollTrigger.refresh(!0)})});